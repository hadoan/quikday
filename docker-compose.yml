version: "3.9"
services:
  db:
    image: postgres:16
    environment:
      POSTGRES_PASSWORD: pass
      POSTGRES_DB: runfast
    ports: ["5432:5432"]
    healthcheck: { test: ["CMD-SHELL","pg_isready -U postgres"], interval: 5s, timeout: 5s, retries: 10 }

  redis:
    image: redis:7
    ports: ["6379:6379"]
    healthcheck: { test: ["CMD","redis-cli","ping"], interval: 5s, timeout: 5s, retries: 10 }

  # api: # uncomment to run API in docker (or run pnpm dev locally)
  #   build:
  #     context: .
  #     dockerfile: Dockerfile.api
  #   env_file: .env
  #   depends_on: [db, redis]
  #   ports: ["3000:3000"]

